#!/bin/sh
if command -v mutter ; then
    mutter --wayland &
elif command -v kwin_wayland ; then
    kwin_wayland --xwayland &
else
    exit 1
fi
sleep 5

if [[ $(distrobox list | grep gamebox) || ! $(flatpak list --app --user --columns=application | grep com.valve) ]]; then
    /usr/bin/steam -gamepadui -tenfoot -fulldesktopres -pipewire-dmabuf
else
    flatpak run com.valvesoftware.Steam -gamepadui -tenfoot -fulldesktopres -pipewire-dmabuf
fi
